<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OŠK Kamenná Poruba - Oficiálna webová stránka</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ensure modal arrows are always the same size */
        #galleryModalPrev,
        #galleryModalNext {
            width: 56px !important;
            height: 56px !important;
            min-width: 56px;
            min-height: 56px;
            max-width: 56px;
            max-height: 56px;
        }

        #galleryModalPrev svg,
        #galleryModalNext svg {
            width: 32px;
            height: 32px;
            display: block;
            margin: auto;
        }

        /* Gallery Modal Navigation Arrows - Modern SVG style */
        #galleryModalPrev,
        #galleryModalNext {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.92);
            color: #003399;
            border-radius: 50%;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
            cursor: pointer;
            z-index: 2100;
            user-select: none;
            border: 2px solid #ffd700;
            transition: background 0.2s, color 0.2s, border 0.2s, box-shadow 0.2s;
        }

        #galleryModalPrev:hover,
        #galleryModalNext:hover {
            background: #ffd700;
            color: #003399;
            border: 2px solid #003399;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.25);
        }

        #galleryModalPrev {
            left: 40px;
            right: auto;
        }

        #galleryModalNext {
            right: 40px;
            left: auto;
        }

        /* Gallery Modal Zoom */
        #galleryModal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s;
        }

        #galleryModal[style*="display: flex"] {
            display: flex !important;
        }

        #galleryModalImg {
            max-width: 90vw;
            max-height: 85vh;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.7);
            transition: transform 0.3s;
            background: #fff;
        }

        #galleryModalClose {
            position: absolute;
            top: 30px;
            right: 40px;
            color: white;
            font-size: 48px;
            font-weight: bold;
            cursor: pointer;
            z-index: 2100;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.7);
            transition: color 0.2s;
        }

        #galleryModalClose:hover {
            color: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f4f4f4;
        }

        :root {
            --header-offset: 110px;
        }

        /* Header & Navigation */
        header {
            background: linear-gradient(135deg, #003399 0%, #1a5ccc 100%);
            color: white;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .header-top {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 20px;
            padding: 20px 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 24px;
        }

        .logo-img {
            width: 72px;
            height: 72px;
            object-fit: contain;
            border-radius: 50%;
            background: white;
            padding: 3px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            display: block;
        }

        .logo i {
            color: #ffd700;
        }

        nav {
            flex: 1;
            min-width: 0;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 30px;
            align-items: center;
            justify-content: flex-end;
        }

        nav li {
            flex-shrink: 0;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
            margin-right: 0;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        nav a:hover {
            color: #ffd700;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: #ffd700;
            transition: width 0.3s;
        }

        nav a:hover::after {
            width: 100%;
        }

        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff4c4c;
            margin-left: 6px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.35);
        }

        .login-btn {
            background: #ffd700;
            color: #003399;
            text-decoration: none;
            padding: 8px 20px;
            border-radius: 5px;
            transition: background 0.3s;
            font-weight: bold;
            display: inline-block;
            max-width: none;
            overflow: visible;
            text-overflow: clip;
            white-space: normal;
            word-break: break-word;
            text-align: center;
            vertical-align: middle;
        }

        .login-btn:hover {
            background: #ffed4e;
            color: #003399;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
            flex-shrink: 0;
        }

        .mobile-login-item {
            display: none;
        }

        .mobile-menu-toggle {
            display: none;
            width: 42px;
            height: 42px;
            border: 1px solid rgba(255, 255, 255, 0.35);
            border-radius: 6px;
            background: transparent;
            color: #fff;
            font-size: 18px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            nav ul {
                gap: 12px 14px;
                flex-wrap: wrap;
                justify-content: flex-end;
                width: 100%;
            }

            nav li {
                min-width: 0;
                flex-shrink: 1;
            }

            .login-btn {
                max-width: 100%;
            }
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('images/jhan-castillon--xWbnIW_ma0-unsplash.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 40px;
            text-align: center;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hero h1 {
            font-size: 56px;
            margin-bottom: 15px;
            animation: slideDown 0.8s ease-out;
        }

        .hero p {
            font-size: 24px;
            margin-bottom: 30px;
            animation: slideUp 0.8s ease-out;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            font-weight: bold;
        }

        .btn-primary {
            background: #ffd700;
            color: #003399;
            font-weight: bold;
        }

        .btn-primary:hover {
            background: #ffed4e;
            color: #003399;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #1a1a2e;
        }

        .btn-secondary:hover {
            background: #ecf0f1;
            transform: translateY(-2px);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Main Content */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        section {
            margin-bottom: 0;
        }

        #about,
        #players,
        #matches,
        #gallery,
        #contact {
            scroll-margin-top: calc(var(--header-offset) + 16px);
        }

        h2 {
            font-size: 36px;
            margin-bottom: 30px;
            color: #003399;
            border-bottom: 3px solid #ffd700;
            padding-bottom: 10px;
            display: inline-block;
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .card-content {
            padding: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #003399;
        }

        .card-text {
            color: #666;
            line-height: 1.6;
        }

        .about-history {
            max-width: 1400px;
            margin: 12px auto 0;
            background: white;
            padding: 28px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .about-history p {
            color: #444;
            line-height: 1.8;
            margin-bottom: 14px;
        }

        .about-history p:last-child {
            margin-bottom: 0;
        }

        .about-more-content {
            display: none;
        }

        .about-more-content.open {
            display: block;
        }

        .about-toggle-wrap {
            margin-top: 14px;
            text-align: center;
        }

        /* Players Section */
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .player-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .player-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: rgba(255, 255, 255, 0.3);
        }

        .player-info {
            padding: 20px;
        }

        .player-name {
            font-size: 20px;
            font-weight: bold;
            color: #003399;
            margin-bottom: 5px;
        }

        .player-position {
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .player-number {
            font-size: 12px;
            color: #666;
        }

        /* Category Filter Buttons */
        .category-filter {
            padding: 12px 24px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 0;
            cursor: pointer;
            font-weight: bold;
            color: #333;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .category-filter:hover {
            background: #f5f5f5;
            border-color: #003399;
            color: #003399;
        }

        .category-filter.active {
            background: #003399;
            color: white;
            border-color: #003399;
            box-shadow: 0 4px 12px rgba(0, 51, 153, 0.3);
        }

        /* Player Stats Item */
        .player-stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s;
        }

        .player-stat-item:hover {
            background: #f9f9f9;
        }

        .player-stat-item:last-child {
            border-bottom: none;
        }

        .player-stat-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .player-stat-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #003399, #1a5ccc);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .player-stat-details {
            flex: 1;
        }

        .player-stat-name {
            font-weight: bold;
            color: #003399;
            font-size: 15px;
            margin-bottom: 3px;
        }

        .player-stat-info-text {
            font-size: 12px;
            color: #999;
        }

        .player-stat-values {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .stat-value {
            width: 50px;
            text-align: center;
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        .stat-header-value {
            width: 56px;
            text-align: center;
            font-weight: bold;
            color: #666;
            font-size: 15px;
            white-space: nowrap;
        }

        .empty-category {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-size: 16px;
        }

        /* Matches/Fixtures */
        .matches-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .match-card {
            background: white;
            padding: 30px;
            border-radius: 0;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            transition: all 0.3s;
            border-left: 6px solid #ffd700;
            cursor: pointer;
        }

        .match-card:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            transform: translateY(-5px);
        }

        .match-teams {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .team-name {
            font-weight: bold;
            min-width: 120px;
            text-align: right;
        }

        .match-vs {
            color: #ffd700;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
        }

        .match-info {
            color: #666;
            font-size: 14px;
            min-width: 200px;
        }

        .match-date {
            background: #ffd700;
            color: #003399;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            white-space: nowrap;
        }

        /* News/Blog Section */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .news-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .news-content {
            padding: 20px;
        }

        .news-date {
            color: #ffd700;
            font-size: 12px;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .news-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #003399;
        }

        .news-excerpt {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .read-more {
            color: #ffd700;
            font-weight: bold;
            text-decoration: none;
            transition: gap 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .read-more:hover {
            gap: 12px;
        }

        /* Gallery Section */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
            margin-top: 16px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.25s, box-shadow 0.25s;
        }

        .gallery-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
        }

        .gallery-image {
            width: 100%;
            max-width: 320px;
            min-width: 220px;
            height: 220px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            display: block;
            margin-left: auto;
            margin-right: auto;
            background: #eaeaea;
        }

        .gallery-caption {
            padding: 12px 14px;
            font-size: 14px;
            color: #333;
            background: #fff;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #003399;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            font-size: 14px;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 15px;
        }

        .modal-header h2 {
            border: none;
            margin: 0;
            padding: 0;
            color: #003399;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #ffd700;
        }

        /* Logout Modal */
        .logout-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .logout-modal.active {
            display: flex;
        }

        .logout-modal-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes loginSpin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .logout-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 15px;
        }

        .logout-modal-header h2 {
            border: none;
            margin: 0;
            padding: 0;
            color: #003399;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #ffd700;
        }

        /* Footer */
        footer {
            background: #003399;
            color: white;
            padding: 40px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 15px;
            color: #ffd700;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: #bbb;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: #ffd700;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 52px;
            height: 52px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: all 0.3s;
            font-size: 2rem;
        }

        .social-icons a:hover {
            background: #ffd700;
            color: #003399;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: #bbb;
        }

        .footer-bottom i {
            color: #ffd700;
        }

        /* Responsive */
        @media (max-width: 768px),
        (max-width: 1024px) and (max-height: 560px) {

            .header-top {
                padding: 12px 14px;
                gap: 10px;
                position: relative;
            }

            .logo {
                gap: 0;
            }

            .logo>div {
                display: none;
            }

            .logo-img {
                width: 52px;
                height: 52px;
                padding: 2px;
            }

            .mobile-menu-toggle {
                display: inline-flex;
            }

            .header-actions .login-btn {
                display: inline-block;
                max-width: none;
                padding: 8px 12px;
                font-size: 13px;
            }

            nav {
                display: none;
                position: absolute;
                left: 0;
                right: 0;
                top: 100%;
                background: linear-gradient(135deg, #003399 0%, #1a5ccc 100%);
                padding: 10px 14px 14px;
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.22);
                z-index: 1100;
            }

            nav.open {
                display: block;
            }

            nav ul {
                width: 100%;
                flex-direction: column;
                align-items: stretch;
                gap: 6px;
                flex-wrap: nowrap;
                font-size: 14px;
            }

            nav li {
                width: 100%;
            }

            .mobile-login-item {
                display: none;
            }

            nav a {
                display: flex;
                width: 100%;
                padding: 10px 6px;
            }

            .mobile-login-item .login-btn {
                display: none;
            }

            /* Player category filter buttons stacked on mobile */
            #players .category-filter {
                display: flex;
                width: 100%;
                margin-bottom: 10px;
                justify-content: flex-start;
            }

            #players>div[style*="display: flex"] {
                flex-direction: column !important;
                gap: 0 !important;
                align-items: stretch !important;
            }

            #matches {
                padding: 50px 12px !important;
            }

            .matches-container {
                grid-template-columns: 1fr;
                gap: 14px;
                margin-top: 18px;
            }

            .match-card {
                width: 100%;
                padding: 18px;
            }

            .about-history {
                padding: 18px;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .match-card {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .match-teams {
                flex-direction: column;
                align-items: center;
                width: 100%;
            }

            .team-name {
                text-align: center;
            }

            .match-info {
                text-align: center;
            }

            main {
                padding: 20px 10px;
            }

            h2 {
                font-size: 24px;
            }

            /* Kontakt pod seba */
            #contact>div[style*='grid'] {
                grid-template-columns: 1fr !important;
                gap: 20px !important;
            }

            /* Kompaktnejšia štatistika hráčov */
            #playersStatsContainer {
                padding: 10px !important;
            }

            .player-stat-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 5px;
                gap: 6px;
            }

            .player-stat-values {
                gap: 10px;
            }

            .player-stat-avatar {
                width: 38px;
                height: 38px;
                font-size: 15px;
            }

            .player-stat-name {
                font-size: 13px;
            }

            .player-stat-info-text {
                font-size: 11px;
            }

            .stat-value {
                width: 32px;
                font-size: 13px;
            }

            .stat-header-value {
                width: 32px;
                font-size: 9px;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-top">
            <div class="logo" id="mainLogo" style="cursor:pointer;">
                <img src="OŠK Kamenná Poruba Logo.png" alt="OŠK Kamenná Poruba Logo" class="logo-img">
                <div>
                    <div style="font-size: 14px; letter-spacing: 1px;">OŠK</div>
                    <div style="font-size: 18px; font-weight: bold;">Kamenná Poruba</div>
                </div>
            </div>
            <nav id="mainNav">
                <ul>
                    <li><a href="#about">O nás</a></li>
                    <li><a href="#players">Hráči</a></li>
                    <li><a href="#matches">Zápasy</a></li>
                    <li><a href="#gallery">Galéria</a></li>
                    <li><a href="#contact">Kontakt</a></li>
                    <li><a href="#" id="matchesNavLink" style="cursor: pointer;" onclick="goToMatches(event)"><i
                                class="fas fa-calendar"></i> Všetky zápasy</a></li>
                    <li id="coachPlayerCardBtn" style="display:none;"><a href="players_list_coach.html"><i
                                class="fas fa-id-card"></i> Karty hráčov</a></li>
                    <li id="coachAccountMgmtBtn" style="display:none;"><a href="account_management.html"><i
                                class="fas fa-users-cog"></i> Správa účtov</a></li>
                    <li><a href="#" id="trainingNavLink" style="cursor: pointer; display: none;"
                            onclick="goToTrainings(event)"><i class="fas fa-dumbbell"></i> Tréningy</a></li>
                    <li><a href="#" id="infoNavLink" style="cursor: pointer; display: none;"
                            onclick="goToImportantInfo(event)"><i class="fas fa-bullhorn"></i> Dôležité info</a></li>
                    <li class="mobile-login-item"><a href="#" class="login-btn" id="mobileLoginBtnText">Prihlásiť sa</a>
                    </li>
                </ul>
            </nav>
            <div class="header-actions">
                <a href="#" class="login-btn" id="loginBtnText">Prihlásiť sa</a>
                <button id="mobileMenuToggle" class="mobile-menu-toggle" type="button" aria-label="Menu"
                    aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <h1>Vitajte na OŠK Kamenná Poruba</h1>
        <p>Výnimočnosť vo futbale, hrdosť komunity</p>
        <div class="hero-buttons">
            <button class="btn btn-primary" onclick="document.getElementById('matches').scrollIntoView()">Zobraziť
                zápasy</button>
            <button class="btn btn-secondary" onclick="document.getElementById('about').scrollIntoView()">Viac
                informácií</button>
        </div>
    </section>

    <!-- Main Content -->
    <main>
        <!-- About Section -->
        <section id="about">
            <h2><i class="fas fa-info-circle"></i> O našom klube</h2>
            <div class="about-history">
                <p>Podľa pamätníkov sa telovýchovné hnutie v Kamennej Porube zorganizovalo v roku 1955. Pri jeho zrode
                    stáli Karol Vereš, Jozef Čuklovič, Ignác Vereš, Pavol Chovančík, Anton Turanec, Blažej Pleva, Ondrej
                    Rybárik a František Sandanus.</p>
                <p>Prvý názov bol Sokol Kamenná Poruba. V roku 1977 sa názov zmenil na TJ ŠM Kamenná Poruba a od roku
                    2003 nesie klub názov Obecný športový klub Kamenná Poruba.</p>
                <p>Prvé ihrisko bolo na konci dediny v Porubskej doline. Od roku 1969 sa hrával futbal na ihrisku na
                    Skotni. Na ihrisko bol veľmi zlý prístup a aj samotné ihrisko nebolo v dobrom stave.</p>
                <p>Nové ihrisko sa za pomoci miestnych futbalových nadšencov začalo stavať v lokalite Dub. Hrávať sa na
                    ňom začalo v roku 1980.</p>
                <p>V roku 2006 sa pri ihrisku začali budovať šatne, ktoré sa dokončili v roku 2010. V roku 2018 sa na
                    ihrisku vybudovalo umelé zavlažovanie a postavila sa menšia tribúna.</p>
                <div id="aboutMoreContent" class="about-more-content">
                    <p>V súčasnosti ma klub 7 futbalových družstiev.</p>
                    <p><strong>Muži</strong> sú účastníkmi VI. ligy – tréner Juraj Ihnatišin, vedúci družstva Peter
                        Ondrejka, lekár Vincent Vereš.</p>
                    <p><strong>U19</strong> účastník I. triedy ObFZ Žilina – tréner Tibor Kašjak, vedúci družstva Tomáš
                        Konotek.</p>
                    <p><strong>U15</strong> účastník II. ligy – tréner Jaroslav Hodás, vedúci Martin Sandanus.</p>
                    <p><strong>U13</strong> účastník II. ligy – tréner Jaroslav Hodás, vedúci Martin Sandanus.</p>
                    <p><strong>U13</strong> účastník I. ligy – tréner Vladimír Michna, vedúci Martin Sandanus.</p>
                    <p><strong>U11</strong> trieda prípraviek – tréner Filip Kasman, Ninka Frnková.</p>
                    <p><strong>U9</strong> trieda prípraviek – tréner Miroslav Hodás, Filip Kasman.</p>
                </div>
                <div class="about-toggle-wrap">
                    <button id="aboutToggleBtn" class="btn btn-secondary" type="button" onclick="toggleAboutMore()">
                        Zobraziť viac
                    </button>
                </div>
            </div>

        </section>

        <!-- Players Section -->
        <section id="players" style="margin-top: 40px;">
            <h2><i class="fas fa-users"></i> Štatistika hráčov</h2>

            <!-- Category Filter -->
            <div
                style="text-align: center; margin-bottom: 40px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                <button onclick="filterPlayers('pripravka_u9')" class="category-filter active"
                    data-category="pripravka_u9">
                    <i class="fas fa-child"></i> Prípravka U9
                </button>
                <button onclick="filterPlayers('pripravka_u11')" class="category-filter" data-category="pripravka_u11">
                    <i class="fas fa-child"></i> Prípravka U11
                </button>
                <button onclick="filterPlayers('ziaci')" class="category-filter" data-category="ziaci">
                    <i class="fas fa-graduation-cap"></i> Žiaci (U12-U15)
                </button>
                <button onclick="filterPlayers('dorastenci')" class="category-filter" data-category="dorastenci">
                    <i class="fas fa-running"></i> Dorastenci (U16-U19)
                </button>
                <button onclick="filterPlayers('adults_young')" class="category-filter" data-category="adults_young">
                    <i class="fas fa-dumbbell"></i> Dospelí - Mladí (18-25)
                </button>
                <button onclick="filterPlayers('adults_pro')" class="category-filter" data-category="adults_pro">
                    <i class="fas fa-star"></i> Dospelí - Skúsení (25+)
                </button>
            </div>

            <!-- Stats Display -->
            <div id="playersStatsContainer"
                style="background: white; border-radius: 0; padding: 30px; box-shadow: 0 8px 20px rgba(0,0,0,0.12); margin-bottom: 40px;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0;">
                    <h3 style="margin: 0; color: #003399; font-size: 20px;">Hráči</h3>
                    <div class="player-stat-values" style="margin-left:auto;">
                        <div class="stat-header-value">Zápasy</div>
                        <div class="stat-header-value">Minúty</div>
                        <div class="stat-header-value">Góly</div>
                        <div class="stat-header-value">Žltá</div>
                        <div class="stat-header-value">Druhá</div>
                        <div class="stat-header-value">Červená</div>
                    </div>
                </div>
                <div id="playersListContainer"></div>
            </div>

        </section>

        <!-- Matches Section -->
        <section id="matches"
            style="background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); padding: 80px 40px;">
            <div style="max-width: 1400px; margin: 0 auto;">
                <h2 style="text-align: center; color: #003399; margin-bottom: 50px; font-size: 36px;">
                    <i class="fas fa-calendar-check"></i> NASLEDUJÚCE ZÁPASY
                </h2>
                <div class="matches-container">
                    <div class="match-card" onclick="goToMatches({preventDefault: function(){}})">
                        <div
                            style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 15px; align-items: center; margin-bottom: 20px;">
                            <div style="text-align: right; font-weight: bold; color: #003399; font-size: 16px;">OŠK
                                Kamenná Poruba</div>
                            <div style="color: #ffd700; font-weight: bold; font-size: 18px; text-align: center;">VS
                            </div>
                            <div style="text-align: left; font-weight: bold; color: #003399; font-size: 16px;">FK
                                Šachtár Banská Bystrica</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
                                <i class="fas fa-calendar"></i> 25. február 2026
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <i class="fas fa-clock"></i> 18:30
                            </div>
                        </div>
                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #ddd;">
                            <i class="fas fa-map-marker-alt"></i> Domáci štadión
                        </div>
                    </div>
                    <div class="match-card" onclick="goToMatches({preventDefault: function(){}})">
                        <div
                            style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 15px; align-items: center; margin-bottom: 20px;">
                            <div style="text-align: right; font-weight: bold; color: #003399; font-size: 16px;">FK
                                Zvolen</div>
                            <div style="color: #ffd700; font-weight: bold; font-size: 18px; text-align: center;">VS
                            </div>
                            <div style="text-align: left; font-weight: bold; color: #003399; font-size: 16px;">OŠK
                                Kamenná Poruba</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
                                <i class="fas fa-calendar"></i> 3. marec 2026
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <i class="fas fa-clock"></i> 17:00
                            </div>
                        </div>
                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #ddd;">
                            <i class="fas fa-map-marker-alt"></i> Vonku
                        </div>
                    </div>
                    <div class="match-card" onclick="goToMatches({preventDefault: function(){}})">
                        <div
                            style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 15px; align-items: center; margin-bottom: 20px;">
                            <div style="text-align: right; font-weight: bold; color: #003399; font-size: 16px;">OŠK
                                Kamenná Poruba</div>
                            <div style="color: #ffd700; font-weight: bold; font-size: 18px; text-align: center;">VS
                            </div>
                            <div style="text-align: left; font-weight: bold; color: #003399; font-size: 16px;">FK Detva
                            </div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
                                <i class="fas fa-calendar"></i> 10. marec 2026
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <i class="fas fa-clock"></i> 18:00
                            </div>
                        </div>
                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #ddd;">
                            <i class="fas fa-map-marker-alt"></i> Domáci štadión
                        </div>
                    </div>
                    <div class="match-card" onclick="goToMatches({preventDefault: function(){}})">
                        <div
                            style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 15px; align-items: center; margin-bottom: 20px;">
                            <div style="text-align: right; font-weight: bold; color: #003399; font-size: 16px;">FK
                                Lučenec</div>
                            <div style="color: #ffd700; font-weight: bold; font-size: 18px; text-align: center;">VS
                            </div>
                            <div style="text-align: left; font-weight: bold; color: #003399; font-size: 16px;">OŠK
                                Kamenná Poruba</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
                                <i class="fas fa-calendar"></i> 17. marec 2026
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <i class="fas fa-clock"></i> 17:30
                            </div>
                        </div>
                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #ddd;">
                            <i class="fas fa-map-marker-alt"></i> Vonku
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 40px;">

                    <button class="btn btn-primary" style="margin-bottom: 32px; margin-top: 0;"
                        onclick="goToMatches({preventDefault: function(){}})">
                        <i class="fas fa-arrow-right"></i> Detaily všetkých zápasov so štatistikami
                    </button>
                </div>

                <!-- Gallery Section (replaces News) -->
                <section id="gallery">
                    <h2><i class="fas fa-images"></i> Galéria</h2>
                    <div class="gallery-grid">
                        <div class="gallery-item">
                            <img class="gallery-image" src="images/10750142878023431842.jpg" alt="Galéria 1"
                                style="min-width:220px; min-height:220px; background:#eaeaea;">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image" src="images/2.jpg" alt="Galéria 2">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/508120564_29838519272462811_2048504803720081817_n.jpg" alt="Galéria 3">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/508433324_29841234952191243_3332785514084510977_n.jpg" alt="Galéria 4">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/508538663_29841234848857920_7529913858397432447_n.jpg" alt="Galéria 5">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image" src="images/51597284815_c985abef70_b.jpg" alt="Galéria 6">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image" src="images/IMG_5259-Enhanced-NR-1024x683.jpg" alt="Galéria 7">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/memorial-milana-smehyla-pre-favorizovanu-kamennu-porubu-117368.1920x1080t.jpg"
                                alt="Galéria 8">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/memorial-milana-smehyla-pre-favorizovanu-kamennu-porubu-13661.1920x1080t.jpg"
                                alt="Galéria 9">
                        </div>
                        <div class="gallery-item">
                            <img class="gallery-image"
                                src="images/rozhovor-kamenna-poruba-okusi-prvykrat-v-historii-klubu-krajsku-sutaz-117322.1920x1080t.jpg"
                                alt="Galéria 10">
                        </div>
                    </div>
                    <!-- Modal for zoomed image -->
                    <div id="galleryModal"
                        style="display:none; position:fixed; z-index:2000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); justify-content:center; align-items:center;">
                        <span id="galleryModalClose"
                            style="position:absolute; top:30px; right:40px; color:white; font-size:48px; font-weight:bold; cursor:pointer; z-index:2100;">&times;</span>
                        <span id="galleryModalPrev">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="16" cy="16" r="16" fill="none" />
                                <polyline points="20,8 12,16 20,24" stroke="#003399" stroke-width="3.5"
                                    stroke-linecap="round" stroke-linejoin="round" fill="none" />
                            </svg>
                        </span>
                        <span id="galleryModalNext">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="16" cy="16" r="16" fill="none" />
                                <polyline points="12,8 20,16 12,24" stroke="#003399" stroke-width="3.5"
                                    stroke-linecap="round" stroke-linejoin="round" fill="none" />
                            </svg>
                        </span>
                        <img id="galleryModalImg" src="" alt="Zoom"
                            style="max-width:90vw; max-height:85vh; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.7);">
                    </div>
                </section>

                <!-- Contact Section -->
                <section id="contact" style="margin-top: 40px;">
                    <h2><i class="fas fa-envelope"></i> Kontaktujte nás</h2>
                    <div
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 30px; margin-bottom: 0; background: transparent; min-height: 0; padding-bottom: 0;">
                        <div>
                            <h3 style="margin-bottom: 20px; color: #1a1a2e;">Kontaktné informácie</h3>
                            <div
                                style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
                                <p style="margin-bottom: 20px;"><i class="fas fa-map-marker-alt"
                                        style="color: #ffd700; width: 30px;"></i> <strong>Adresa:</strong><br>Futbalový
                                    štadión, Kamenná Poruba, Slovensko</p>
                                <p style="margin-bottom: 20px;"><i class="fas fa-phone"
                                        style="color: #ffd700; width: 30px;"></i> <strong>Telefón:</strong><br>+421 123
                                    456 789</p>
                                <p style="margin-bottom: 20px;"><i class="fas fa-envelope"
                                        style="color: #ffd700; width: 30px;"></i>
                                    <strong>Email:</strong><br>info@oskamennaoruba.sk
                                </p>
                                <p><i class="fas fa-clock" style="color: #ffd700; width: 30px;"></i> <strong>Pracovná
                                        doba:</strong><br>Po-Pia: 9:00 - 18:00</p>
                            </div>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 20px; color: #1a1a2e;">Pošlite nám správu</h3>
                            <form action="mailto:strananekm@gmail.com" method="post" enctype="text/plain"
                                style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
                                <div class="form-group">
                                    <label for="name">Meno a priezvisko</label>
                                    <input type="text" id="name" name="Meno" placeholder="Vaše meno" required>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" name="Email" placeholder="Váš email" required>
                                </div>
                                <div class="form-group">
                                    <label for="message">Správa</label>
                                    <textarea id="message" name="Správa" rows="5" placeholder="Vaša správa"
                                        required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary" style="width: 100%;">Poslať
                                    správu</button>
                            </form>
                        </div>
                    </div>
                </section>
    </main>

    <style>
        /* Remove extra space at the end of the page */
        body {
            margin-bottom: 0 !important;
            padding-bottom: 0 !important;
        }

        @media (max-width: 700px) {
            body {
                margin-bottom: 0 !important;
                padding-bottom: 0 !important;
            }

            #contact {
                margin-bottom: 0 !important;
                padding-bottom: 0 !important;
            }
        }
    </style>
    <!-- Training View Container (loads dynamically) -->
    <div id="trainingView"></div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Prihlásenie do systému</h2>
                <button class="close-btn" onclick="closeLoginModal()"><i class="fas fa-times"></i></button>
            </div>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="username">Používateľské meno</label>
                    <input type="text" id="username" placeholder="Zadajte vaše používateľské meno" required>
                </div>
                <div class="form-group">
                    <label for="password">Heslo</label>
                    <input type="password" id="password" placeholder="Zadajte vaše heslo" required>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; font-weight: normal;">
                        <input type="checkbox" style="width: auto; margin-right: 8px;">
                        Pamätať si ma
                    </label>
                </div>
                <button id="loginSubmitBtn" type="submit" class="btn btn-primary"
                    style="width: 100%; margin-bottom: 10px; display:flex; justify-content:center; align-items:center; gap:10px;">
                    <span id="loginSubmitSpinner"
                        style="display:none;width:16px;height:16px;border:2px solid rgba(255,255,255,0.45);border-top-color:#fff;border-radius:50%;animation:loginSpin 0.8s linear infinite;"></span>
                    <span id="loginSubmitText">Prihlásiť sa</span>
                </button>
                <a href="#"
                    style="display: block; text-align: center; color: #ffd700; text-decoration: none; font-size: 14px;">Zabudli
                    ste heslo?</a>
            </form>
            <div id="loginError"
                style="display:none; color:#e74c3c; background:rgba(231,76,60,0.08); border:1px solid #e74c3c; border-radius:5px; padding:10px; margin-bottom:10px; text-align:center; font-weight:bold; animation: shake 0.3s;">
            </div>
        </div>
    </div>

    <!-- Logout Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Odhlásenie</h2>
                <button class="close-btn" onclick="closeLogoutModal()"><i class="fas fa-times"></i></button>
            </div>
            <div style="margin: 20px 0; text-align: center;">
                <p>Ste prihlásený ako <b id="logoutUserName"></b>.</p>
                <p>Čo chcete urobiť?</p>
            </div>
            <button class="btn btn-primary" style="width:100%;margin-bottom:10px;background:#e74c3c;color:white;"
                onclick="handleLogout()"><i class="fas fa-sign-out-alt"></i> Odhlásiť sa</button>
            <button class="btn btn-secondary" style="width:100%;margin-bottom:10px;background:#ffd700;color:#003399;"
                onclick="handleSwitchAccount()"><i class="fas fa-user-switch"></i> Prepnúť účet</button>
            <button class="btn btn-secondary"
                style="width:fit-content;display:flex;margin:0 auto 0;padding:7px 12px;font-size:12px;background:#1a5ccc;color:#fff;"
                onclick="openChangePasswordModal()"><i class="fas fa-key"></i> Zmeniť heslo</button>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content" style="max-width:420px;">
            <div class="modal-header">
                <h2 style="font-size:26px;">Zmena hesla</h2>
                <button class="close-btn" onclick="closeChangePasswordModal()"><i class="fas fa-times"></i></button>
            </div>
            <div style="margin: 20px 0; text-align: left; font-size:16px;">
                <div style="margin-bottom: 12px;">
                    <label for="newPasswordInput"
                        style="display:block;font-weight:bold;margin-bottom:6px;font-size:15px;">Nové
                        heslo</label>
                    <input id="newPasswordInput" type="password" minlength="8"
                        style="width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;"
                        placeholder="Min. 8 znakov">
                </div>
                <div style="margin-bottom: 12px;">
                    <label for="confirmPasswordInput"
                        style="display:block;font-weight:bold;margin-bottom:6px;font-size:15px;">Potvrdiť
                        heslo</label>
                    <input id="confirmPasswordInput" type="password" minlength="8"
                        style="width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;"
                        placeholder="Zopakujte heslo">
                </div>
                <div id="changePasswordError" style="display:none;color:#e74c3c;font-weight:bold;font-size:15px;"></div>
            </div>
            <button class="btn btn-secondary"
                style="width:100%;margin-bottom:10px;background:#1a5ccc;color:#fff;font-size:15px;padding:12px 14px;"
                onclick="submitPasswordChange()"><i class="fas fa-save"></i> Uložiť nové heslo</button>
            <button class="btn btn-secondary"
                style="width:100%;background:#999;color:#fff;font-size:15px;padding:12px 14px;"
                onclick="closeChangePasswordModal()">Zrušiť</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-futbol"></i> OŠK Kamenná Poruba</h3>
                <div class="social-icons">
                    <a href="https://www.facebook.com/100057309406135/mentions/" title="Facebook"><i
                            class="fab fa-facebook-f"></i></a>
                    <a href="https://sportnet.sme.sk/futbalnet/k/osk-kamenna-poruba/" title="Sportsnet" target="_blank"
                        rel="noopener">
                        <i class="fas fa-futbol"></i> </a>
                    <a href="https://www.obeckamennaporuba.sk" title="Stránka obce" target="_blank" rel="noopener">
                        <i class="fas fa-landmark"></i>
                    </a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Rýchle odkazy</h3>
                <ul>
                    <li><a href="#about">O nás</a></li>
                    <li><a href="#players">Hráči</a></li>
                    <li><a href="#matches">Zápasy</a></li>
                    <li><a href="#gallery">Galéria</a></li>
                    <li><a href="#contact">Kontakt</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Informácie</h3>
                <ul>
                    <li><a href="#">Politika ochrany osobných údajov</a></li>
                    <li><a href="#">Podmienky používania</a></li>
                    <li><a href="#">Často kladené otázky</a></li>
                    <li><a href="#">Rezervácia vstupeniek</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 OŠK Kamenná Poruba. Všetky práva vyhradené.</p>
        </div>
    </footer>

    <script src="trainings.js"></script>
    <script>
        function updateHeaderScrollOffset() {
            const header = document.querySelector('header');
            if (!header) return;
            document.documentElement.style.setProperty('--header-offset', `${header.offsetHeight}px`);
        }

        function toggleAboutMore() {
            const content = document.getElementById('aboutMoreContent');
            const button = document.getElementById('aboutToggleBtn');
            if (!content || !button) return;

            const isOpen = content.classList.toggle('open');
            button.textContent = isOpen ? 'Zobraziť menej' : 'Zobraziť viac';
        }

        // Zobraziť tlačidlo 'Karta hráča' len pre coachov
        function showCoachPlayerCardButton() {
            // Oprava: kontroluj currentUser.isLoggedIn a rolu
            var btn = document.getElementById('coachPlayerCardBtn');
            var mgmtBtn = document.getElementById('coachAccountMgmtBtn');
            if (currentUser && currentUser.isLoggedIn && (currentUser.role === 'coach' || currentUser.role === 'admin')) {
                if (btn) btn.style.display = '';
            } else {
                if (btn) btn.style.display = 'none';
            }

            if (currentUser && currentUser.isLoggedIn && currentUser.role === 'admin') {
                if (mgmtBtn) mgmtBtn.style.display = '';
            } else {
                if (mgmtBtn) mgmtBtn.style.display = 'none';
            }

            updateHeaderScrollOffset();
        }
        // ...existing code...
        // Po prihlásení/načítaní stránky
        document.addEventListener('DOMContentLoaded', function () {
            showCoachPlayerCardButton();
            updateHeaderScrollOffset();
        });
        // Ak sa mení užívateľ (napr. login/logout)
        window.showCoachPlayerCardButton = showCoachPlayerCardButton;
        // Scroll to main section when logo is clicked
        document.addEventListener('DOMContentLoaded', function () {
            var logo = document.getElementById('mainLogo');
            if (logo) {
                logo.addEventListener('click', function () {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mainNav = document.getElementById('mainNav');

            function closeMobileMenu() {
                if (!mainNav || !mobileMenuToggle) return;
                mainNav.classList.remove('open');
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
            }

            if (mobileMenuToggle && mainNav) {
                mobileMenuToggle.addEventListener('click', function (event) {
                    event.preventDefault();
                    const open = mainNav.classList.toggle('open');
                    mobileMenuToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
                });

                mainNav.addEventListener('click', function (event) {
                    const target = event.target;
                    if (!(target instanceof Element)) return;
                    if (target.closest('a')) {
                        closeMobileMenu();
                    }
                });

                document.addEventListener('click', function (event) {
                    const target = event.target;
                    if (!(target instanceof Element)) return;

                    if (target.closest('#mobileMenuToggle') || target.closest('#mainNav')) {
                        return;
                    }

                    closeMobileMenu();
                });

                window.addEventListener('resize', function () {
                    if (window.innerWidth > 768) {
                        closeMobileMenu();
                    }
                    updateHeaderScrollOffset();
                });
            }

            function handleAuthButtonClick(e) {
                e.preventDefault();
                if (currentUser && currentUser.isLoggedIn) {
                    openLogoutModal();
                } else {
                    openLoginModal();
                }
            }

            const loginBtn = document.getElementById('loginBtnText');
            if (loginBtn) {
                loginBtn.onclick = handleAuthButtonClick;
            }

            const mobileLoginBtn = document.getElementById('mobileLoginBtnText');
            if (mobileLoginBtn) {
                mobileLoginBtn.onclick = handleAuthButtonClick;
            }
        });
        // Global variables
        let currentUser = {
            username: null,
            role: null,
            isLoggedIn: false
        };
        const PLAYERS = {};
        function resolveApiBase() {
            const host = window.location.hostname;
            if (host === 'localhost' || host === '127.0.0.1') {
                return 'http://localhost:4000/api';
            }
            return '/api';
        }

        const API_BASE = resolveApiBase();
        let csrfTokenCache = null;

        async function fetchCsrfTokenWithRetry() {
            let lastError = null;

            for (let attempt = 1; attempt <= 3; attempt += 1) {
                try {
                    const response = await fetch(`${API_BASE}/csrf-token`, {
                        method: 'GET',
                        credentials: 'include'
                    });

                    if (!response.ok) {
                        const payload = await response.json().catch(() => ({}));
                        throw new Error(payload.message || `CSRF endpoint error (${response.status})`);
                    }

                    const payload = await response.json();
                    if (!payload || !payload.csrfToken) {
                        throw new Error('CSRF token nebol v odpovedi servera.');
                    }

                    return payload.csrfToken;
                } catch (error) {
                    lastError = error;
                    if (attempt < 3) {
                        await sleep(800 * attempt);
                    }
                }
            }

            throw lastError || new Error('Nepodarilo sa načítať CSRF token.');
        }

        async function ensureCsrfToken() {
            if (csrfTokenCache) {
                return csrfTokenCache;
            }

            csrfTokenCache = await fetchCsrfTokenWithRetry();
            return csrfTokenCache;
        }

        async function fetchSessionUser() {
            const response = await fetch(`${API_BASE}/auth/me`, {
                method: 'GET',
                credentials: 'include'
            });

            if (!response.ok) {
                return null;
            }

            const payload = await response.json();
            return payload.user || null;
        }

        async function syncCurrentUserFromSession() {
            const user = await fetchSessionUser();
            if (!user) {
                currentUser = { username: null, role: null, isLoggedIn: false };
                localStorage.removeItem('currentUser');
                updateLoginButtonText();
                return;
            }

            currentUser = {
                username: user.username,
                role: user.role,
                isLoggedIn: true
            };

            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateLoginButtonText();
        }

        // ====== FILTROVANIE A ZOBRAZENIE HRÁČOV ======
        let currentPlayerFilter = 'pripravka_u9';

        function sleep(ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
        }

        async function fetchPlayersPayloadWithRetry() {
            let lastError = null;

            for (let attempt = 1; attempt <= 2; attempt += 1) {
                try {
                    const response = await fetch(`${API_BASE}/players`, {
                        method: 'GET',
                        credentials: 'include'
                    });

                    if (!response.ok) {
                        throw new Error('Nepodarilo sa načítať hráčov zo servera.');
                    }

                    return response.json();
                } catch (error) {
                    lastError = error;
                    if (attempt < 2) {
                        await sleep(1200);
                    }
                }
            }

            throw lastError || new Error('Nepodarilo sa načítať hráčov zo servera.');
        }

        async function loadPlayersFromApi() {
            const payload = await fetchPlayersPayloadWithRetry();
            const items = Array.isArray(payload && payload.items) ? payload.items : [];

            Object.keys(PLAYERS).forEach((key) => delete PLAYERS[key]);
            items.forEach((player) => {
                PLAYERS[player.username] = {
                    username: player.username,
                    fullName: player.fullName || player.username,
                    category: player.category,
                    position: player.position || '--',
                    shirtNumber: player.shirtNumber || '--',
                    dateOfBirth: player.dateOfBirth || '--',
                    stats: player.stats || {
                        matches: 0,
                        minutes: 0,
                        goals: 0,
                        yellowCards: 0,
                        secondYellow: 0,
                        redCards: 0
                    }
                };
            });
        }

        async function initializePlayers() {
            const container = document.getElementById('playersListContainer');
            if (container) {
                container.innerHTML = '<div class="empty-category">Načítavam hráčov...</div>';
            }

            try {
                await loadPlayersFromApi();
            } catch (error) {
                console.error(error);
                if (container) {
                    container.innerHTML = '<div class="empty-category">Server sa pravdepodobne prebúdza. Skús obnoviť stránku o pár sekúnd.</div>';
                }
                return;
            }

            renderPlayerStats(currentPlayerFilter);
        }

        function filterPlayers(category) {
            currentPlayerFilter = category;

            // Update active button
            document.querySelectorAll('.category-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');

            renderPlayerStats(category);
        }

        function renderPlayerStats(category) {
            const container = document.getElementById('playersListContainer');
            let filteredPlayers = Object.values(PLAYERS);

            filteredPlayers = filteredPlayers.filter(p => p.category === category);

            if (filteredPlayers.length === 0) {
                container.innerHTML = '<div class="empty-category">Žiadni hráči v tejto kategórii</div>';
                return;
            }

            // Sort by last name
            filteredPlayers.sort((a, b) => {
                const aLastName = a.fullName.split(' ').pop();
                const bLastName = b.fullName.split(' ').pop();
                return aLastName.localeCompare(bLastName);
            });

            let html = '';
            filteredPlayers.forEach(player => {
                const initials = player.fullName.split(' ').map(n => n[0]).join('');
                const stats = player.stats || { matches: 0, minutes: 0, goals: 0, yellowCards: 0, secondYellow: 0, redCards: 0 };
                html += `
                    <div class="player-stat-item">
                        <div class="player-stat-info">
                            <div class="player-stat-avatar">${initials}</div>
                            <div class="player-stat-details">
                                <div class="player-stat-name">${player.fullName}</div>
                                <div class="player-stat-info-text">${player.position} • #${player.shirtNumber} • ${getCategoryLabel(player.category)}</div>
                            </div>
                        </div>
                        <div class="player-stat-values">
                            <div class="stat-value" title="Zápasy">${stats.matches}</div>
                            <div class="stat-value" title="Minúty">${stats.minutes}</div>
                            <div class="stat-value" title="Góly">${stats.goals}</div>
                            <div class="stat-value" title="Žlté karty">${stats.yellowCards}</div>
                            <div class="stat-value" title="Druhá ŽK">${stats.secondYellow}</div>
                            <div class="stat-value" title="Červené karty">${stats.redCards}</div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function getCategoryLabel(cat) {
            const labels = {
                'pripravka_u9': 'Prípravka U9',
                'pripravka_u11': 'Prípravka U11',
                'ziaci': 'Žiaci',
                'dorastenci': 'Dorastenci',
                'adults_young': 'Dospelí - Mladí',
                'adults_pro': 'Dospelí - Skúsení'
            };
            return labels[cat] || cat;
        }

        // Login Modal Functions
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            ensureCsrfToken().catch(() => {
                csrfTokenCache = null;
            });
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        document.getElementById('loginModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });

        // Update login button text
        function updateLoginButtonText() {
            const loginBtn = document.getElementById('loginBtnText');
            const mobileLoginBtn = document.getElementById('mobileLoginBtnText');
            const trainingNavLink = document.getElementById('trainingNavLink');
            const infoNavLink = document.getElementById('infoNavLink');
            const matchesNavLink = document.getElementById('matchesNavLink');
            if (currentUser.isLoggedIn) {
                const fullUsername = currentUser.username || '';
                loginBtn.textContent = fullUsername;
                loginBtn.title = fullUsername;
                if (mobileLoginBtn) {
                    mobileLoginBtn.textContent = fullUsername;
                    mobileLoginBtn.title = fullUsername;
                }
                trainingNavLink.style.display = 'block';
                infoNavLink.style.display = 'block';
                matchesNavLink.style.display = 'block';
            } else {
                loginBtn.textContent = 'Prihlásiť sa';
                loginBtn.title = '';
                if (mobileLoginBtn) {
                    mobileLoginBtn.textContent = 'Prihlásiť sa';
                    mobileLoginBtn.title = '';
                }
                trainingNavLink.style.display = 'none';
                infoNavLink.style.display = 'none';
                // keep matchesNavLink visible for all users (including guests)
            }
            updateImportantInfoNavBadge();
            updateHeaderScrollOffset();
        }

        const IMPORTANT_INFO_ANNOUNCEMENTS_KEY = 'club_announcements';
        const IMPORTANT_INFO_POLLS_KEY = 'club_polls';
        const IMPORTANT_INFO_SEEN_PREFIX = 'importantInfoSeenEvents_';

        function getImportantInfoSeenKey() {
            const username = currentUser && currentUser.username ? currentUser.username : 'guest';
            return IMPORTANT_INFO_SEEN_PREFIX + username;
        }

        function canUserSeeImportantEvent(target) {
            if (!currentUser || !currentUser.isLoggedIn) {
                return false;
            }
            if (currentUser.role === 'coach' || currentUser.role === 'admin') {
                return true;
            }
            if (target === 'all') {
                return true;
            }
            if (target === 'players') {
                return currentUser.role === 'player';
            }
            if (target === 'parents') {
                return currentUser.role === 'parent';
            }
            if (target === 'coaches') {
                return currentUser.role === 'coach' || currentUser.role === 'admin';
            }
            return false;
        }

        function getImportantEventsForUser() {
            const announcements = JSON.parse(localStorage.getItem(IMPORTANT_INFO_ANNOUNCEMENTS_KEY) || '[]');
            const polls = JSON.parse(localStorage.getItem(IMPORTANT_INFO_POLLS_KEY) || '[]');
            if (!currentUser || !currentUser.isLoggedIn) {
                return [];
            }
            return [...announcements, ...polls].filter(event => canUserSeeImportantEvent(event.target));
        }

        function hasUnseenImportantInfo() {
            if (!currentUser || !currentUser.isLoggedIn) {
                return false;
            }
            const seen = JSON.parse(localStorage.getItem(getImportantInfoSeenKey()) || '[]');
            return getImportantEventsForUser().some(event => !seen.includes(event.id));
        }

        function updateImportantInfoNavBadge() {
            const infoNavLink = document.getElementById('infoNavLink');
            if (!infoNavLink) {
                return;
            }
            const hasUnseen = hasUnseenImportantInfo();
            const existingDot = infoNavLink.querySelector('.nav-dot');
            if (hasUnseen) {
                if (!existingDot) {
                    const dot = document.createElement('span');
                    dot.className = 'nav-dot';
                    dot.setAttribute('aria-label', 'Nové dôležité správy');
                    infoNavLink.appendChild(dot);
                }
            } else if (existingDot) {
                existingDot.remove();
            }
        }

        window.addEventListener('storage', function (event) {
            if (!event.key) {
                return;
            }
            if (event.key === IMPORTANT_INFO_ANNOUNCEMENTS_KEY || event.key === IMPORTANT_INFO_POLLS_KEY || event.key.startsWith(IMPORTANT_INFO_SEEN_PREFIX)) {
                updateImportantInfoNavBadge();
            }
        });
        // Logout Modal Functions
        function openLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                // Set username in modal
                const userNameSpan = document.getElementById('logoutUserName');
                if (userNameSpan && currentUser && currentUser.username) {
                    userNameSpan.textContent = currentUser.username;
                }
            }
        }

        function closeLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        function openChangePasswordModal() {
            closeLogoutModal();
            const modal = document.getElementById('changePasswordModal');
            const errorDiv = document.getElementById('changePasswordError');
            if (errorDiv) {
                errorDiv.style.display = 'none';
                errorDiv.textContent = '';
            }
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeChangePasswordModal() {
            const modal = document.getElementById('changePasswordModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }

            const newPasswordInput = document.getElementById('newPasswordInput');
            const confirmPasswordInput = document.getElementById('confirmPasswordInput');
            const errorDiv = document.getElementById('changePasswordError');

            if (newPasswordInput) newPasswordInput.value = '';
            if (confirmPasswordInput) confirmPasswordInput.value = '';
            if (errorDiv) {
                errorDiv.style.display = 'none';
                errorDiv.textContent = '';
            }
        }

        async function handleLogout() {
            let logoutSucceeded = false;
            try {
                const csrfToken = await ensureCsrfToken();
                const response = await fetch(`${API_BASE}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-csrf-token': csrfToken
                    }
                });

                logoutSucceeded = response.ok;
            } catch (error) {
                console.error(error);
            }

            currentUser = { username: null, role: null, isLoggedIn: false };
            localStorage.removeItem('currentUser');
            closeLogoutModal();
            updateLoginButtonText();
            showCoachPlayerCardButton();

            if (!logoutSucceeded) {
                try {
                    await syncCurrentUserFromSession();
                    showCoachPlayerCardButton();
                } catch (error) {
                    console.error(error);
                }
            }

            return logoutSucceeded;
        }

        async function submitPasswordChange() {
            const newPasswordInput = document.getElementById('newPasswordInput');
            const confirmPasswordInput = document.getElementById('confirmPasswordInput');
            const errorDiv = document.getElementById('changePasswordError');

            const newPassword = newPasswordInput ? newPasswordInput.value : '';
            const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value : '';

            if (!newPassword || newPassword.length < 8) {
                if (errorDiv) {
                    errorDiv.textContent = 'Heslo musí mať aspoň 8 znakov.';
                    errorDiv.style.display = 'block';
                }
                return;
            }

            if (newPassword !== confirmPassword) {
                if (errorDiv) {
                    errorDiv.textContent = 'Heslá sa nezhodujú.';
                    errorDiv.style.display = 'block';
                }
                return;
            }

            try {
                const csrfToken = await ensureCsrfToken();
                const response = await fetch(`${API_BASE}/auth/change-password`, {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-csrf-token': csrfToken
                    },
                    body: JSON.stringify({ newPassword })
                });

                const payload = await response.json().catch(() => ({}));
                if (!response.ok) {
                    throw new Error(payload.message || 'Zmena hesla zlyhala.');
                }

                alert('Heslo bolo úspešne zmenené.');
                closeChangePasswordModal();
            } catch (error) {
                if (errorDiv) {
                    errorDiv.textContent = error.message || 'Zmena hesla zlyhala.';
                    errorDiv.style.display = 'block';
                }
            }
        }

        async function handleSwitchAccount() {
            await handleLogout();
            openLoginModal();
        }

        // Close logout modal when clicking outside
        document.addEventListener('DOMContentLoaded', function () {
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.addEventListener('click', function (e) {
                    if (e.target === this) {
                        closeLogoutModal();
                    }
                });
            }

            const changePasswordModal = document.getElementById('changePasswordModal');
            if (changePasswordModal) {
                changePasswordModal.addEventListener('click', function (e) {
                    if (e.target === this) {
                        closeChangePasswordModal();
                    }
                });
            }
        });

        function goToTrainings(e) {
            e.preventDefault();
            window.location.href = 'trainings.html';
        }

        function goToMatches(e) {
            e.preventDefault();
            window.location.href = 'matches.html';
        }

        function goToImportantInfo(e) {
            e.preventDefault();
            window.location.href = 'important_info.html';
        }

        // Handle Login
        function setLoginLoading(isLoading) {
            const submitBtn = document.getElementById('loginSubmitBtn');
            const spinner = document.getElementById('loginSubmitSpinner');
            const text = document.getElementById('loginSubmitText');

            if (submitBtn) {
                submitBtn.disabled = Boolean(isLoading);
                submitBtn.style.opacity = isLoading ? '0.85' : '1';
                submitBtn.style.cursor = isLoading ? 'wait' : 'pointer';
            }

            if (spinner) {
                spinner.style.display = isLoading ? 'inline-block' : 'none';
            }

            if (text) {
                text.textContent = isLoading ? 'Prihlasujem...' : 'Prihlásiť sa';
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value.trim();

            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');
            setLoginLoading(true);

            try {
                const csrfToken = await ensureCsrfToken();
                const loginResponse = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-csrf-token': csrfToken
                    },
                    body: JSON.stringify({ username, password })
                });

                if (!loginResponse.ok) {
                    const loginErrorPayload = await loginResponse.json().catch(() => ({}));
                    if (loginResponse.status === 401) {
                        throw new Error(loginErrorPayload.message || 'Nesprávne prihlasovacie údaje.');
                    }

                    if (loginResponse.status === 403) {
                        throw new Error('Bezpečnostná kontrola zlyhala. Obnov stránku a skús to znova.');
                    }

                    throw new Error(loginErrorPayload.message || 'Prihlásenie zlyhalo. Skúste to znova.');
                }

                const loginPayload = await loginResponse.json();
                const actualRole = loginPayload.user.role;

                errorDiv.style.display = 'none';

                currentUser = {
                    username,
                    role: actualRole,
                    isLoggedIn: true
                };

                localStorage.setItem('currentUser', JSON.stringify(currentUser));

                if (actualRole === 'parent') {
                    parentChildren = {};
                    const children = typeof getParentChildrenUsernames === 'function'
                        ? getParentChildrenUsernames(username)
                        : [];
                    children.forEach((childUsername) => {
                        parentChildren[childUsername] = true;
                    });
                }

                closeLoginModal();
                document.getElementById('loginForm').reset();
                updateLoginButtonText();
                showCoachPlayerCardButton();
            } catch (error) {
                errorDiv.textContent = error.message || 'Prihlásenie zlyhalo. Skontrolujte údaje a skúste znova.';
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'shake 0.3s';
                setTimeout(() => { errorDiv.style.animation = ''; }, 400);
                console.error(error);
            } finally {
                setLoginLoading(false);
            }
        }

        // Get role label in Slovak
        function getRoleLabel(role) {
            const roleLabels = {
                'player': 'Hráč',
                'parent': 'Rodič',
                'coach': 'Tréner',
                'admin': 'Admin'
            };
            return roleLabels[role] || role;
        }

        // Show training view
        function showTrainingView(event) {
            event.preventDefault();
            if (!currentUser.isLoggedIn) {
                alert('Prosím sa najskôr prihláste!');
                openLoginModal();
                return;
            }

            // Initialize training view
            initializeTrainingView();
            loadTrainingData();

            // Show/hide areas based on role
            if (currentUser.role === 'player' || currentUser.role === 'parent') {
                document.getElementById('coachCreateTrainingArea').style.display = 'none';
                document.getElementById('playerTrainingArea').style.display = 'block';
                document.getElementById('parentChildrenArea').style.display = currentUser.role === 'parent' ? 'block' : 'none';
                document.getElementById('coachRosterArea').style.display = 'none';
                if (currentUser.role === 'parent') {
                    updateChildrenList();
                }
                refreshPlayerTrainings();
            } else if (currentUser.role === 'coach' || currentUser.role === 'admin') {
                document.getElementById('coachCreateTrainingArea').style.display = 'block';
                document.getElementById('playerTrainingArea').style.display = 'none';
                document.getElementById('parentChildrenArea').style.display = 'none';
                document.getElementById('coachRosterArea').style.display = 'block';
                refreshCoachRoster();
            }

            // Scroll to training section
            document.getElementById('trainingView').scrollIntoView({ behavior: 'smooth' });
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && document.querySelector(href)) {
                    e.preventDefault();
                    document.querySelector(href).scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Load last login if available
        window.addEventListener('load', async function () {
            ensureCsrfToken().catch(() => {
                csrfTokenCache = null;
            });

            try {
                await syncCurrentUserFromSession();
            } catch (error) {
                console.error(error);
                currentUser = {
                    username: null,
                    role: null,
                    isLoggedIn: false
                };
                updateLoginButtonText();
            }

            // Initialize players stats
            await initializePlayers();
            showCoachPlayerCardButton();

            // Gallery zoom modal logic
            const galleryImages = Array.from(document.querySelectorAll('.gallery-image'));
            const modal = document.getElementById('galleryModal');
            const modalImg = document.getElementById('galleryModalImg');
            const modalClose = document.getElementById('galleryModalClose');
            const modalPrev = document.getElementById('galleryModalPrev');
            const modalNext = document.getElementById('galleryModalNext');
            let currentImgIndex = 0;

            function showModalAtIndex(idx) {
                if (idx < 0) idx = galleryImages.length - 1;
                if (idx >= galleryImages.length) idx = 0;
                currentImgIndex = idx;
                const img = galleryImages[currentImgIndex];
                modalImg.src = img.src;
                modalImg.alt = img.alt;
                modal.style.display = 'flex';
            }

            galleryImages.forEach((img, i) => {
                img.addEventListener('click', function () {
                    showModalAtIndex(i);
                });
            });

            modalClose.addEventListener('click', function () {
                modal.style.display = 'none';
                modalImg.src = '';
            });

            modalPrev.addEventListener('click', function (e) {
                e.stopPropagation();
                showModalAtIndex(currentImgIndex - 1);
            });
            modalNext.addEventListener('click', function (e) {
                e.stopPropagation();
                showModalAtIndex(currentImgIndex + 1);
            });

            // Keyboard navigation
            document.addEventListener('keydown', function (e) {
                if (modal.style.display === 'flex') {
                    if (e.key === 'ArrowLeft') {
                        showModalAtIndex(currentImgIndex - 1);
                    } else if (e.key === 'ArrowRight') {
                        showModalAtIndex(currentImgIndex + 1);
                    } else if (e.key === 'Escape') {
                        modal.style.display = 'none';
                        modalImg.src = '';
                    }
                }
            });

            // Close modal on click outside image
            modal.addEventListener('click', function (e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                    modalImg.src = '';
                }
            });
        });
    </script>
</body>

</html>