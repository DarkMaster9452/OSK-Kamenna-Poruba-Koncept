<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline výstavby OŠK Kamenná Poruba</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #17223f;
            background: linear-gradient(180deg, #f3f6ff 0%, #eef2ff 100%);
            min-height: 100vh;
        }

        .topbar {
            background: linear-gradient(135deg, #003399 0%, #1a5ccc 100%);
            color: #fff;
            box-shadow: 0 8px 22px rgba(0, 0, 0, 0.12);
        }

        .topbar-inner {
            max-width: 1280px;
            margin: 0 auto;
            min-height: 72px;
            padding: 0 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .brand {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
            letter-spacing: 0.2px;
            color: #fff;
            text-decoration: none;
        }

        .brand img {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            object-fit: contain;
            background: #fff;
            padding: 2px;
        }

        .back-link {
            color: #fff;
            text-decoration: none;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .brand:hover,
        .back-link:hover {
            color: #ffd700;
        }

        .page {
            max-width: 1280px;
            margin: 0 auto;
            padding: 24px 18px 42px;
        }

        .hero {
            background: #fff;
            border: 1px solid rgba(0, 51, 153, 0.1);
            border-top: 4px solid #ffd700;
            border-radius: 16px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.08);
            padding: 20px;
            margin-bottom: 16px;
        }

        .hero h1 {
            color: #003399;
            font-size: 30px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hero h1 i {
            color: #ffd700;
        }

        .hero p {
            color: #33405f;
            line-height: 1.7;
        }

        .year-nav {
            position: sticky;
            top: 10px;
            z-index: 20;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(6px);
            border: 1px solid rgba(0, 51, 153, 0.1);
            border-radius: 14px;
            padding: 10px;
            margin-bottom: 14px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
        }

        .year-nav a {
            text-decoration: none;
            color: #003399;
            font-weight: 700;
            border: 1px solid #ffd700;
            border-radius: 999px;
            padding: 7px 12px;
            background: #fff;
            font-size: 13px;
            transition: background 0.2s, color 0.2s, border-color 0.2s;
        }

        .year-nav a:hover {
            background: #ffd700;
            color: #003399;
            border-color: #003399;
        }

        .timeline {
            display: grid;
            gap: 14px;
        }

        .year-block {
            background: #fff;
            border: 1px solid rgba(0, 51, 153, 0.12);
            border-left: 6px solid #ffd700;
            border-radius: 14px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.07);
            overflow: hidden;
            scroll-margin-top: 90px;
        }

        .year-head {
            padding: 14px 14px 10px;
            border-bottom: 1px solid rgba(0, 51, 153, 0.08);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .year-badge {
            background: #003399;
            color: #fff;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 800;
            padding: 4px 10px;
            letter-spacing: 0.2px;
            border: 2px solid #ffd700;
        }

        .year-title {
            color: #003399;
            font-size: 19px;
            font-weight: 800;
            line-height: 1.3;
        }

        .year-body {
            padding: 12px 14px 14px;
        }

        .year-points {
            margin: 0 0 12px;
            padding-left: 18px;
            line-height: 1.65;
            color: #273352;
        }

        .year-points li {
            margin-bottom: 4px;
        }

        .photos-grid {
            display: grid;
            grid-auto-flow: column;
            grid-auto-columns: minmax(160px, 1fr);
            gap: 10px;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 4px;
        }

        .photo-card {
            border: 1px solid rgba(0, 51, 153, 0.13);
            border-radius: 10px;
            overflow: hidden;
            background: #f7faff;
            min-width: 160px;
            cursor: pointer;
        }

        .photo-card img {
            width: 100%;
            height: 130px;
            object-fit: cover;
            display: block;
        }

        .photo-caption {
            padding: 7px 8px;
            font-size: 12px;
            font-weight: 700;
            color: #003399;
            background: #fff;
            line-height: 1.35;
            border-top: 1px solid rgba(255, 215, 0, 0.8);
        }

        .photo-card.more-card {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 170px;
            background: linear-gradient(135deg, #003399 0%, #1a5ccc 100%);
            color: #fff;
            font-weight: 800;
            font-size: 18px;
            letter-spacing: 0.3px;
            border: 2px solid #ffd700;
        }

        .photo-modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            padding: 20px;
        }

        .photo-modal.open {
            display: flex;
        }

        .photo-modal-content {
            width: min(100%, 980px);
            max-height: calc(100vh - 40px);
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25);
        }

        .photo-modal-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            background: #003399;
            color: #fff;
        }

        .photo-modal-head button {
            background: transparent;
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 6px 10px;
            cursor: pointer;
            font-weight: 700;
        }

        .photo-modal-image-wrap {
            display: grid;
            place-items: center;
            background: #eef2ff;
            min-height: 320px;
            max-height: 70vh;
            overflow: auto;
        }

        .photo-modal-image {
            max-width: 100%;
            max-height: 68vh;
            object-fit: contain;
        }

        .photo-modal-caption {
            padding: 10px 14px 14px;
            color: #003399;
            font-weight: 700;
            line-height: 1.4;
        }

        .photo-modal-nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 0 14px 14px;
        }

        .photo-modal-nav button {
            border: 1px solid #003399;
            background: #fff;
            color: #003399;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 24px;
            }

            .photos-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .photo-card img {
                height: 120px;
            }
        }
    </style>
</head>

<body>
    <header class="topbar">
        <div class="topbar-inner">
            <a class="brand" href="index.html" aria-label="Prejsť na hlavnú stránku">
                <img src="OŠK Kamenná Poruba Logo.png" alt="Logo OŠK Kamenná Poruba">
                <span>OŠK Kamenná Poruba</span>
            </a>
            <a class="back-link" href="index.html"><i class="fas fa-arrow-left"></i> Späť na hlavnú stránku</a>
        </div>
    </header>

    <main class="page">
        <section class="hero">
            <h1><i class="fas fa-timeline"></i> Timeline výstavby budovy OŠK</h1>
            <p>Nové UI pre prehľadnú správu historických fotiek klubu a etáp výstavby v rokoch 2006–2010.
                Ku každému roku môžeš pridať veľa fotiek len doplnením položiek v dátach nižšie.</p>
        </section>

        <nav class="year-nav" id="yearNav"></nav>
        <section class="timeline" id="timeline"></section>
    </main>

    <div class="photo-modal" id="photoModal" aria-hidden="true">
        <div class="photo-modal-content">
            <div class="photo-modal-head">
                <strong id="photoModalTitle">Fotografia</strong>
                <button type="button" id="photoModalCloseBtn">Zavrieť ✕</button>
            </div>
            <div class="photo-modal-image-wrap">
                <img id="photoModalImage" class="photo-modal-image" src="" alt="">
            </div>
            <div id="photoModalCaption" class="photo-modal-caption"></div>
            <div class="photo-modal-nav">
                <button type="button" id="photoPrevBtn">← Predchádzajúca</button>
                <button type="button" id="photoNextBtn">Ďalšia →</button>
            </div>
        </div>
    </div>

    <script>
        const TIMELINE_DATA = [
            {
                id: 'historicke',
                year: 'Historické',
                title: 'Historické fotky klubu',
                points: [
                    'Archívne zábery klubu a areálu pred výstavbou.',
                    'Sem môžeš pridávať ľubovoľný počet historických fotografií.'
                ],
                photos: [
                    { src: 'images/51597284815_c985abef70_b.jpg', alt: 'Historické začiatky klubu', caption: 'Historické začiatky klubu' },
                    { src: 'images/IMG_5259-Enhanced-NR-1024x683.jpg', alt: 'Prvé obdobie futbalu v obci', caption: 'Prvé obdobie futbalu v obci' },
                    { src: 'images/2.jpg', alt: 'Archívna fotografia klubu', caption: 'Archívna fotografia klubu' },
                    { src: 'images/359sk_1.jpg', alt: 'Historický pohľad na areál', caption: 'Historický pohľad na areál' }
                ]
            },
            {
                id: 'y2006-2007',
                year: '2006 – 2007',
                title: 'Začiatok výstavby budovy OŠK',
                points: [
                    'Spustenie výstavby klubovej budovy.',
                    'Prvé stavebné práce a príprava etáp.'
                ],
                photos: [
                    { src: 'images/10750142878023431842.jpg', alt: 'Začiatok výstavby', caption: 'Začiatok výstavby (2006–2007)' },
                    { src: 'images/508120564_29838519272462811_2048504803720081817_n.jpg', alt: 'Stavebné práce', caption: 'Stavebné práce (2006–2007)' }
                ]
            },
            {
                id: 'y2008',
                year: '2008',
                title: 'Pokračovanie výstavby',
                points: [
                    'Rozšírenie stavebných častí objektu.',
                    'Pokračovanie hrubej stavby a infraštruktúry.'
                ],
                photos: [
                    { src: 'images/508433324_29841234952191243_3332785514084510977_n.jpg', alt: 'Výstavba 2008', caption: 'Výstavba (2008)' },
                    { src: 'images/508538663_29841234848857920_7529913858397432447_n.jpg', alt: 'Priebeh stavby 2008', caption: 'Priebeh stavby (2008)' }
                ]
            },
            {
                id: 'y2009',
                year: '2009',
                title: 'Pokročilá fáza výstavby',
                points: [
                    'Dokončovanie stavebných a technických častí.',
                    'Príprava objektu na finálne dokončenie.'
                ],
                photos: [
                    { src: 'images/508120564_29838519272462811_2048504803720081817_n.jpg', alt: 'Pokročilá fáza 2009', caption: 'Pokročilá fáza (2009)' },
                    { src: 'images/10750142878023431842.jpg', alt: 'Stav objektu 2009', caption: 'Stav objektu (2009)' }
                ]
            },
            {
                id: 'y2010',
                year: '2010',
                title: 'Dokončenie budovy OŠK Kamenná Poruba',
                points: [
                    'Dokončenie budovy a odovzdanie do používania.',
                    'Vznik stabilného klubového zázemia.'
                ],
                photos: [
                    { src: 'images/508433324_29841234952191243_3332785514084510977_n.jpg', alt: 'Dokončenie 2010', caption: 'Dokončenie (2010)' },
                    { src: 'images/508538663_29841234848857920_7529913858397432447_n.jpg', alt: 'Hotové zázemie 2010', caption: 'Hotové zázemie (2010)' }
                ]
            }
        ];

        const timelineContainer = document.getElementById('timeline');
        const yearNav = document.getElementById('yearNav');
        const MIN_PHOTOS_PER_BLOCK = 20;
        const PREVIEW_PHOTOS_PER_BLOCK = 6;
        const previewOffsetByBlockId = {};

        const photoModal = document.getElementById('photoModal');
        const photoModalImage = document.getElementById('photoModalImage');
        const photoModalCaption = document.getElementById('photoModalCaption');
        const photoModalTitle = document.getElementById('photoModalTitle');
        const photoModalCloseBtn = document.getElementById('photoModalCloseBtn');
        const photoPrevBtn = document.getElementById('photoPrevBtn');
        const photoNextBtn = document.getElementById('photoNextBtn');

        let activeModalBlockId = null;
        let activeModalPhotoIndex = 0;

        function normalizePhotos(photos, minimumCount) {
            if (!Array.isArray(photos) || photos.length === 0) {
                return [];
            }

            if (photos.length >= minimumCount) {
                return photos;
            }

            const expanded = [];
            for (let index = 0; index < minimumCount; index += 1) {
                const basePhoto = photos[index % photos.length];
                const cycle = Math.floor(index / photos.length) + 1;
                expanded.push({
                    src: basePhoto.src,
                    alt: `${basePhoto.alt} (${index + 1})`,
                    caption: `${basePhoto.caption} • ${cycle}`
                });
            }

            return expanded;
        }

        const TIMELINE_DATA_WITH_MIN_PHOTOS = TIMELINE_DATA.map((block) => ({
            ...block,
            photos: normalizePhotos(block.photos, MIN_PHOTOS_PER_BLOCK)
        }));

        function getBlockById(blockId) {
            return TIMELINE_DATA_WITH_MIN_PHOTOS.find((block) => block.id === blockId);
        }

        function getPreviewSlice(photos, startIndex) {
            if (!photos.length) {
                return [];
            }

            const result = [];
            for (let index = 0; index < Math.min(PREVIEW_PHOTOS_PER_BLOCK, photos.length); index += 1) {
                const photoIndex = (startIndex + index) % photos.length;
                result.push({ photo: photos[photoIndex], photoIndex });
            }

            return result;
        }

        function renderTimeline() {
            timelineContainer.innerHTML = TIMELINE_DATA_WITH_MIN_PHOTOS.map((block) => {
                const startOffset = Number(previewOffsetByBlockId[block.id] || 0);
                const previewItems = getPreviewSlice(block.photos, startOffset);

                return `
                    <article class="year-block" id="${block.id}">
                        <div class="year-head">
                            <span class="year-badge">${block.year}</span>
                            <h2 class="year-title">${block.title}</h2>
                        </div>
                        <div class="year-body">
                            <ul class="year-points">
                                ${block.points.map((point) => `<li>${point}</li>`).join('')}
                            </ul>
                            <div class="photos-grid" data-block-id="${block.id}">
                                ${previewItems.map(({ photo, photoIndex }) => `
                                    <figure class="photo-card" data-action="open-photo" data-block-id="${block.id}" data-photo-index="${photoIndex}">
                                        <img src="${photo.src}" alt="${photo.alt}">
                                        <figcaption class="photo-caption">${photo.caption}</figcaption>
                                    </figure>
                                `).join('')}
                                ${block.photos.length > PREVIEW_PHOTOS_PER_BLOCK ? `
                                    <div class="photo-card more-card" data-action="next-preview" data-block-id="${block.id}" title="Posunúť na ďalšie fotografie v poradí">
                                        +${block.photos.length - PREVIEW_PHOTOS_PER_BLOCK} viac
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        }

        function showModalPhoto() {
            const block = getBlockById(activeModalBlockId);
            if (!block || !block.photos.length) {
                return;
            }

            const safeIndex = ((activeModalPhotoIndex % block.photos.length) + block.photos.length) % block.photos.length;
            activeModalPhotoIndex = safeIndex;
            const photo = block.photos[safeIndex];

            photoModalTitle.textContent = `${block.year} • ${safeIndex + 1}/${block.photos.length}`;
            photoModalImage.src = photo.src;
            photoModalImage.alt = photo.alt;
            photoModalCaption.textContent = photo.caption;
        }

        function openPhotoModal(blockId, photoIndex) {
            activeModalBlockId = blockId;
            activeModalPhotoIndex = Number(photoIndex || 0);
            showModalPhoto();
            photoModal.classList.add('open');
            photoModal.setAttribute('aria-hidden', 'false');
        }

        function closePhotoModal() {
            photoModal.classList.remove('open');
            photoModal.setAttribute('aria-hidden', 'true');
        }

        function moveModalPhoto(step) {
            const block = getBlockById(activeModalBlockId);
            if (!block || !block.photos.length) {
                return;
            }

            activeModalPhotoIndex = activeModalPhotoIndex + step;
            showModalPhoto();
        }

        timelineContainer.addEventListener('click', (event) => {
            const target = event.target.closest('[data-action]');
            if (!target) {
                return;
            }

            const action = target.dataset.action;
            const blockId = target.dataset.blockId;
            if (!blockId) {
                return;
            }

            if (action === 'next-preview') {
                const block = getBlockById(blockId);
                if (!block || block.photos.length <= PREVIEW_PHOTOS_PER_BLOCK) {
                    return;
                }

                const currentOffset = Number(previewOffsetByBlockId[blockId] || 0);
                previewOffsetByBlockId[blockId] = (currentOffset + 1) % block.photos.length;
                renderTimeline();
                return;
            }

            if (action === 'open-photo') {
                openPhotoModal(blockId, Number(target.dataset.photoIndex || 0));
            }
        });

        photoModalCloseBtn.addEventListener('click', closePhotoModal);
        photoPrevBtn.addEventListener('click', () => moveModalPhoto(-1));
        photoNextBtn.addEventListener('click', () => moveModalPhoto(1));
        photoModal.addEventListener('click', (event) => {
            if (event.target === photoModal) {
                closePhotoModal();
            }
        });

        document.addEventListener('keydown', (event) => {
            if (!photoModal.classList.contains('open')) {
                return;
            }

            if (event.key === 'Escape') {
                closePhotoModal();
            } else if (event.key === 'ArrowLeft') {
                moveModalPhoto(-1);
            } else if (event.key === 'ArrowRight') {
                moveModalPhoto(1);
            }
        });

        yearNav.innerHTML = TIMELINE_DATA_WITH_MIN_PHOTOS.map((block) => `
            <a href="#${block.id}">${block.year}</a>
        `).join('');

        renderTimeline();
    </script>
</body>

</html>